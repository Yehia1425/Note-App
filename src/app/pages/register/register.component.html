<form [formGroup]="registerForm" class="w-50 mx-auto bg-white rounded-4 shadow-lg p-5 mt-4 rgis" (ngSubmit)="registerUser()"  >
<h1>Create a Account</h1>
<p>Create a new account</p>


@if (errormsg) {

    <div class="alert alert-danger w-50 mx-auto text-center">
        <p class=" mb-0 ">{{errormsg}}</p>
     </div>
}


<div>
    <label class="mt-3" for="username">User Name</label>
    <input formControlName="name" id="username" class="form-control" type="text"  [ngClass]="{
        'is-invalid' : registerForm.get('name')?.errors && registerForm.get('name')?.touched,
        'is-valid' : !registerForm.get('name')?.errors && registerForm.get('name')?.touched,


    }"  >

@if (registerForm.get('name')?.touched && registerForm.get('name')?.errors ) {
    <div class="alert alert-danger">
        @if (registerForm.get('name')?.getError('required') ) {
            <p class="mb-0">Name is Required</p>
        }
        @if (registerForm.get('name')?.getError('minlength')) {
            <p class="mb-0">Name must be more than 3 characters</p>
        }
    </div>
}
</div>
<div>
    <label class="mt-3" for="email">Email</label>
    <input formControlName="email" id="email" class="form-control" type="email" [ngClass]="{
        'is-invalid' : registerForm.get('email')?.errors && registerForm.get('email')?.touched,
        'is-valid' : !registerForm.get('email')?.errors && registerForm.get('email')?.touched,


    }"
    >

    @if (registerForm.get('email')?.touched && registerForm.get('email')?.errors ) {
        <div class="alert alert-danger">
            @if (registerForm.get('email')?.getError('required') ) {
                <p class="mb-0">Email is Required</p>
            }
            @if (registerForm.get('email')?.getError('email')) {
                <p class="mb-0">Email must be valid</p>
            }
        </div>
    }
</div>
<div>
    <label class="mt-3" for="password">Password</label>
    <input formControlName="password" id="password" class="form-control" type="password"
    [ngClass]="{
        'is-invalid' : registerForm.get('password')?.errors && registerForm.get('password')?.touched,
        'is-valid' : !registerForm.get('password')?.errors && registerForm.get('password')?.touched,

    }">

    @if (registerForm.get('password')?.touched && registerForm.get('password')?.errors ) {
        <div class="alert alert-danger">
            @if (registerForm.get('password')?.getError('required') ) {
                <p class="mb-0">Password is Required</p>
            }
            @if (registerForm.get('password')?.getError('pattern')) {
                <p class="mb-0">password must be valid</p>
            }
        </div>
    }
</div>
<div>
    <label class="mt-3" for="age">Age</label>
    <input formControlName="age" id="age" class="form-control" type="text"
    [ngClass]="{   
        'is-invalid' : registerForm.get('age')?.errors && registerForm.get('age')?.touched,
        'is-valid' : !registerForm.get('age')?.errors && registerForm.get('age')?.touched,

    }">
    @if (registerForm.get('age')?.touched && registerForm.get('age')?.errors ) {
        <div class="alert alert-danger">
            @if (registerForm.get('age')?.getError('required') ) {
                <p class="mb-0">Age is Required</p>
            }
            @if (registerForm.get('age')?.getError('min')) {
                <p class="mb-0">Age must be grater than 20</p>
            }
        </div>
    }

</div>
<div>
    <label class="mt-3" for="phone">Phone</label>
    <input formControlName="phone" id="phone" class="form-control" type="tel"
    [ngClass]="{
        'is-invalid' : registerForm.get('phone')?.errors && registerForm.get('phone')?.touched,
        'is-valid' : !registerForm.get('phone')?.errors && registerForm.get('phone')?.touched,

    }">

    @if (registerForm.get('phone')?.touched && registerForm.get('phone')?.errors ) {
        <div class="alert alert-danger">
            @if (registerForm.get('phone')?.getError('required') ) {
                <p class="mb-0">phone is Required</p>
            }
            @if (registerForm.get('phone')?.getError('pattern')) {
                <p class="mb-0">phone must Egytion phone number</p>
            }
        </div>
    }
</div>


    <button type="submit" class="btn btn-success mt-3 main-btn" [disabled]="registerForm.invalid"> Register</button>
    <a class="mt-3 text-center text-black d-flex flex-column align-content-center" routerLink="/login">Already have an account ? Login</a>
 

</form>